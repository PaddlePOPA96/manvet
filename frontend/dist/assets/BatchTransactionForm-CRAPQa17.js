import{j as e,r as c}from"./index-ChC7JKR1.js";import{I as o}from"./Input-DmDhfL36.js";import{P as w}from"./plus-CPG4z07s.js";import{X as k}from"./x-BcKJ8x2i.js";import{S}from"./save-XMXrZOdM.js";function p({className:d="",children:m,...l}){return e.jsx("select",{className:`w-full border rounded px-2 py-2 text-sm bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${d}`,...l,children:m})}function P({type:d,title:m,products:l,conditions:u,onSubmit:g,bgColor:j,btnColor:b,canCreate:y}){const[r,h]=c.useState({date:new Date().toISOString().split("T")[0],reseller:""}),[a,n]=c.useState({product:"",condition:u[0],quantity:"",productionDate:""}),[s,x]=c.useState([]);c.useEffect(()=>{l.length>0&&!a.product&&n(t=>({...t,product:l[0].name}))},[l]);const f=t=>{if(t.preventDefault(),!a.quantity||a.quantity<=0)return alert("Jumlah > 0");if(!a.product)return alert("Pilih produk");x([...s,{...a,id:Date.now()}]),n(i=>({...i,quantity:""}))},N=()=>{if(s.length&&window.confirm(`Simpan ${s.length} item ke database?`)){if(!y){alert("Anda tidak memiliki hak untuk membuat transaksi.");return}s.forEach(t=>{g({type:d,date:r.date,reseller:r.reseller,product:t.product,condition:t.condition,quantity:t.quantity,productionDate:t.productionDate})}),x([]),alert("Tersimpan ke database.")}};return e.jsxs("div",{className:"bg-white rounded-lg shadow border overflow-hidden max-w-5xl mx-auto",children:[e.jsxs("div",{className:`p-4 border-b ${j}`,children:[e.jsx("h2",{className:"font-bold text-lg flex items-center gap-2",children:m}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[e.jsx(o,{type:"date",value:r.date,onChange:t=>h({...r,date:t.target.value})}),d==="OUT"&&e.jsx(o,{className:"placeholder-gray-400",placeholder:"Nama Reseller (Opsional)",value:r.reseller,onChange:t=>h({...r,reseller:t.target.value})})]})]}),e.jsx("div",{className:"p-4 bg-white border-b",children:e.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 md:grid-cols-12 gap-2 items-end",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Produk"}),e.jsx(p,{value:a.product,onChange:t=>n({...a,product:t.target.value}),children:l.map((t,i)=>e.jsx("option",{value:t.name,children:t.name},t.id||i))})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Kondisi"}),e.jsx(p,{value:a.condition,onChange:t=>n({...a,condition:t.target.value}),children:u.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Batch / Tgl"}),e.jsx(o,{type:"date",className:"placeholder-gray-400",value:a.productionDate,onChange:t=>n({...a,productionDate:t.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Jumlah"}),e.jsx(o,{type:"number",min:"1",placeholder:"Qty",value:a.quantity,onChange:t=>n({...a,quantity:t.target.value})})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsx("button",{type:"submit",className:"w-full bg-gray-800 text-white p-2 rounded hover:bg-gray-900",children:e.jsx(w,{size:18})})})]})}),e.jsxs("div",{className:"p-4",children:[s.length>0?e.jsx("div",{className:"border rounded overflow-hidden mb-4",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-xs uppercase text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Item"}),e.jsx("th",{className:"px-4 py-2",children:"Kondisi"}),e.jsx("th",{className:"px-4 py-2",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Hapus"})]})}),e.jsx("tbody",{children:s.map((t,i)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:t.product}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-500",children:t.condition}),e.jsx("td",{className:"px-4 py-2 font-bold",children:t.quantity}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx("button",{onClick:()=>x(s.filter((q,v)=>v!==i)),className:"text-red-400",children:e.jsx(k,{size:16})})})]},t.id||i))})]})}):e.jsx("p",{className:"text-center text-gray-400 py-4 text-sm",children:"Belum ada item ditambahkan."}),e.jsxs("button",{onClick:N,disabled:s.length===0,className:`w-full py-3 text-white font-bold rounded shadow flex justify-center items-center gap-2 ${s.length===0?"bg-gray-300":b}`,children:[e.jsx(S,{size:18})," Simpan Semua"]})]})]})}export{P as default};
