import{c as N,r as m,j as e,S as v,f as I}from"./index-BeZhcdjS.js";import{X as h,I as r}from"./Input-lCMBpvfH.js";import{P as w}from"./plus-CONnjs7Z.js";import{C as P}from"./circle-check-big-CERAeCRN.js";import{T as C}from"./trash-2-Be8aZOHO.js";/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=N("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);function q({products:g,onAdd:b,onEdit:j,onDelete:f,canManage:o}){const[d,u]=m.useState(!1),[t,i]=m.useState({name:"",price:"",cost:"",photoUrl:"",packageInfo:""}),[x,p]=m.useState(null),[s,c]=m.useState({name:"",price:"",cost:"",photoUrl:"",packageInfo:""}),k=a=>{if(a.preventDefault(),t.name&&t.price){if(!o){alert("Anda tidak memiliki hak untuk menambah produk.");return}b({name:t.name,price:parseInt(t.price),cost:parseInt(t.cost||0),photoUrl:t.photoUrl.trim(),packageInfo:t.packageInfo.trim()}),i({name:"",price:"",cost:"",photoUrl:"",packageInfo:""}),u(!1)}},y=()=>{if(s.name&&s.price){if(!o){alert("Anda tidak memiliki hak untuk mengubah produk.");return}j(x,{name:s.name,price:parseInt(s.price),cost:parseInt(s.cost||0),photoUrl:(s.photoUrl||"").trim(),packageInfo:(s.packageInfo||"").trim()}),p(null)}};return e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-700 flex items-center gap-2",children:[e.jsx(v,{size:24})," Manajemen Produk"]}),e.jsxs("button",{onClick:()=>u(!d),disabled:!o,className:"bg-teal-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-teal-700 disabled:opacity-40 disabled:cursor-not-allowed",children:[d?e.jsx(h,{size:16}):e.jsx(w,{size:16})," ",d?"Batal":"Tambah Produk Baru"]})]}),d&&e.jsxs("form",{onSubmit:k,className:"bg-teal-50 p-4 rounded-lg mb-6 border border-teal-200 grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Nama Produk"}),e.jsx(r,{placeholder:"Nama...",value:t.name,onChange:a=>i({...t,name:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Hrg Modal (HPP)"}),e.jsx(r,{type:"number",placeholder:"0",value:t.cost,onChange:a=>i({...t,cost:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Hrg Jual"}),e.jsx(r,{type:"number",placeholder:"0",value:t.price,onChange:a=>i({...t,price:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Info Paket"}),e.jsx(r,{placeholder:"cth: 1 box isi 10",value:t.packageInfo,onChange:a=>i({...t,packageInfo:a.target.value})})]}),e.jsx("button",{type:"submit",className:"bg-teal-600 text-white p-2 rounded font-bold hover:bg-teal-700",children:"Simpan"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-600 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Produk"}),e.jsx("th",{className:"px-4 py-3",children:"Harga Jual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Aksi"})]})}),e.jsx("tbody",{children:g.map((a,n)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 align-top",children:x===n?e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"border px-1 py-1 w-full text-sm",value:s.name,onChange:l=>c({...s,name:l.target.value})}),e.jsx(r,{className:"border px-1 py-1 w-full text-xs placeholder-gray-400",placeholder:"URL Foto (opsional)",value:s.photoUrl||"",onChange:l=>c({...s,photoUrl:l.target.value})}),e.jsx(r,{className:"border px-1 py-1 w-full text-xs placeholder-gray-400",placeholder:"Info paket, contoh: 1 box isi 10",value:s.packageInfo||"",onChange:l=>c({...s,packageInfo:l.target.value})})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[a.photoUrl?e.jsx("img",{src:a.photoUrl,alt:a.name,className:"w-10 h-10 rounded object-cover border border-gray-200"}):e.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 border border-gray-200 flex items-center justify-center text-[10px] text-gray-400",children:"No foto"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:a.name}),a.packageInfo&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Paket: ",a.packageInfo]})]})]})}),e.jsx("td",{className:"px-4 py-3 font-bold text-teal-700 align-top",children:x===n?e.jsx(r,{type:"number",className:"border px-1 py-1 w-full",value:s.price,onChange:l=>c({...s,price:l.target.value})}):I(a.price)}),e.jsx("td",{className:"px-4 py-3 text-right flex justify-end gap-2",children:x===n?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:y,disabled:!o,className:"text-green-600 p-1 disabled:opacity-40 disabled:cursor-not-allowed",children:e.jsx(P,{size:18})}),e.jsx("button",{onClick:()=>p(null),className:"text-gray-500 p-1",children:e.jsx(h,{size:18})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{if(!o){alert("Anda tidak memiliki hak untuk mengubah produk.");return}p(n),c(a)},className:"text-blue-500 p-1",children:e.jsx(U,{size:16})}),e.jsx("button",{onClick:()=>{if(!o){alert("Anda tidak memiliki hak untuk menghapus produk.");return}f(n)},className:"text-red-500 p-1",children:e.jsx(C,{size:16})})]})})]},a.id||n))})]})})]})}export{q as default};
