import{c as k,j as e,r as c}from"./index-BeZhcdjS.js";import{I as o,X as w}from"./Input-lCMBpvfH.js";import{P as S}from"./plus-CONnjs7Z.js";/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=k("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function p({className:i="",children:x,...l}){return e.jsx("select",{className:`w-full border rounded px-2 py-2 text-sm bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 ${i}`,...l,children:x})}function z({type:i,title:x,products:l,conditions:h,onSubmit:g,bgColor:j,btnColor:b,canCreate:y}){const[r,u]=c.useState({date:new Date().toISOString().split("T")[0],reseller:""}),[a,n]=c.useState({product:"",condition:h[0],quantity:"",productionDate:""}),[s,m]=c.useState([]);c.useEffect(()=>{l.length>0&&!a.product&&n(t=>({...t,product:l[0].name}))},[l]);const f=t=>{if(t.preventDefault(),!a.quantity||a.quantity<=0)return alert("Jumlah > 0");if(!a.product)return alert("Pilih produk");m([...s,{...a,id:Date.now()}]),n(d=>({...d,quantity:""}))},v=()=>{if(s.length&&window.confirm(`Simpan ${s.length} item ke database?`)){if(!y){alert("Anda tidak memiliki hak untuk membuat transaksi.");return}s.forEach(t=>{g({type:i,date:r.date,reseller:r.reseller,product:t.product,condition:t.condition,quantity:t.quantity,productionDate:t.productionDate})}),m([]),alert("Tersimpan ke database.")}};return e.jsxs("div",{className:"bg-white rounded-lg shadow border overflow-hidden max-w-5xl mx-auto",children:[e.jsxs("div",{className:`p-4 border-b ${j}`,children:[e.jsx("h2",{className:"font-bold text-lg flex items-center gap-2",children:x}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[e.jsx(o,{type:"date",value:r.date,onChange:t=>u({...r,date:t.target.value})}),i==="OUT"&&e.jsx(o,{className:"placeholder-gray-400",placeholder:"Nama Reseller (Opsional)",value:r.reseller,onChange:t=>u({...r,reseller:t.target.value})})]})]}),e.jsx("div",{className:"p-4 bg-white border-b",children:e.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 md:grid-cols-12 gap-2 items-end",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Produk"}),e.jsx(p,{value:a.product,onChange:t=>n({...a,product:t.target.value}),children:l.map((t,d)=>e.jsx("option",{value:t.name,children:t.name},t.id||d))})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Kondisi"}),e.jsx(p,{value:a.condition,onChange:t=>n({...a,condition:t.target.value}),children:h.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Batch / Tgl"}),e.jsx(o,{type:"date",className:"placeholder-gray-400",value:a.productionDate,onChange:t=>n({...a,productionDate:t.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Jumlah"}),e.jsx(o,{type:"number",min:"1",placeholder:"Qty",value:a.quantity,onChange:t=>n({...a,quantity:t.target.value})})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsx("button",{type:"submit",className:"w-full bg-gray-800 text-white p-2 rounded hover:bg-gray-900",children:e.jsx(S,{size:18})})})]})}),e.jsxs("div",{className:"p-4",children:[s.length>0?e.jsx("div",{className:"border rounded overflow-hidden mb-4",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-xs uppercase text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Item"}),e.jsx("th",{className:"px-4 py-2",children:"Kondisi"}),e.jsx("th",{className:"px-4 py-2",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Hapus"})]})}),e.jsx("tbody",{children:s.map((t,d)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:t.product}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-500",children:t.condition}),e.jsx("td",{className:"px-4 py-2 font-bold",children:t.quantity}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx("button",{onClick:()=>m(s.filter((C,N)=>N!==d)),className:"text-red-400",children:e.jsx(w,{size:16})})})]},t.id||d))})]})}):e.jsx("p",{className:"text-center text-gray-400 py-4 text-sm",children:"Belum ada item ditambahkan."}),e.jsxs("button",{onClick:v,disabled:s.length===0,className:`w-full py-3 text-white font-bold rounded shadow flex justify-center items-center gap-2 ${s.length===0?"bg-gray-300":b}`,children:[e.jsx(q,{size:18})," Simpan Semua"]})]})]})}export{z as default};
