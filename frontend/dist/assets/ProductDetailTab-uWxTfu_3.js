import{c as N,r as x,d as w,j as e,P as T,f as n,T as C}from"./index-BeZhcdjS.js";/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=N("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=N("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function A({productName:l,inventoryData:o,transactions:m,onBack:u}){const i=x.useMemo(()=>o.find(s=>s.name===l)||{name:l,price:0,cost:0,in:0,out:0,waste:0,quarantine:0,stock:0},[o,l]),d=x.useMemo(()=>m.filter(s=>s.product===l),[m,l]),{inByCondition:f,outByCondition:v,salesSummary:c}=x.useMemo(()=>{const s={},t={};let j=0,g=0,y=0;return d.forEach(a=>{const r=parseInt(a.quantity,10)||0;if(a.type==="IN")s[a.condition]=(s[a.condition]||0)+r;else if(a.type==="OUT"&&(t[a.condition]=(t[a.condition]||0)+r,w.includes(a.condition))){const b=a.price||0,k=a.cost||0;j+=b*r,g+=(b-k)*r,y+=r}}),{inByCondition:s,outByCondition:t,salesSummary:{revenue:j,profit:g,soldQty:y}}},[d]),h=Object.entries(f).sort((s,t)=>t[1]-s[1]),p=Object.entries(v).sort((s,t)=>t[1]-s[1]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("button",{type:"button",onClick:u,className:"inline-flex items-center gap-2 text-xs text-gray-600 hover:text-gray-800 mb-1",children:[e.jsx(K,{size:14}),"Kembali ke Stok"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-teal-50 flex items-center justify-center text-teal-600",children:e.jsx(T,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:l}),e.jsx("p",{className:"text-xs text-gray-500",children:"Detail stok & penjualan per kondisi."})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Harga Jual"}),e.jsx("div",{className:"font-semibold text-teal-700",children:n(i.price||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Harga Modal"}),e.jsx("div",{className:"font-semibold text-gray-700",children:n(i.cost||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Stok Ready"}),e.jsx("div",{className:"font-semibold text-blue-700",children:i.stock})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Waste"}),e.jsx("div",{className:"font-semibold text-red-600",children:i.waste})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border p-4",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Masuk"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:i.in})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border p-4",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Keluar"}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.out})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Ringkasan Penjualan"}),e.jsx(C,{size:16,className:"text-teal-600"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Terjual (SALE/Reseller/Consignment):"," ",e.jsx("span",{className:"font-semibold text-gray-700",children:c.soldQty})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Omzet:"," ",e.jsx("span",{className:"font-semibold text-teal-700",children:n(c.revenue)})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Profit:"," ",e.jsx("span",{className:"font-semibold text-emerald-700",children:n(c.profit)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2 text-sm",children:"Kondisi Barang Masuk"}),h.length===0?e.jsx("p",{className:"text-xs text-gray-400",children:"Belum ada transaksi barang masuk untuk produk ini pada periode yang dipilih."}):e.jsxs("table",{className:"w-full text-xs text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-1",children:"Kondisi"}),e.jsx("th",{className:"px-3 py-1 text-right",children:"Qty"})]})}),e.jsx("tbody",{children:h.map(([s,t])=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-1 text-gray-700",children:s}),e.jsx("td",{className:"px-3 py-1 text-right font-semibold",children:t})]},s))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2 text-sm",children:"Kondisi Barang Keluar"}),p.length===0?e.jsx("p",{className:"text-xs text-gray-400",children:"Belum ada transaksi barang keluar untuk produk ini pada periode yang dipilih."}):e.jsxs("table",{className:"w-full text-xs text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-1",children:"Kondisi"}),e.jsx("th",{className:"px-3 py-1 text-right",children:"Qty"})]})}),e.jsx("tbody",{children:p.map(([s,t])=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-3 py-1 text-gray-700",children:s}),e.jsx("td",{className:"px-3 py-1 text-right font-semibold",children:t})]},s))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-700 text-sm",children:"Riwayat Transaksi Produk"}),d.length===0&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] text-gray-400",children:[e.jsx(M,{size:12})," Tidak ada transaksi pada periode ini"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-1",children:"Tanggal"}),e.jsx("th",{className:"px-3 py-1",children:"Tipe"}),e.jsx("th",{className:"px-3 py-1 text-right",children:"Qty"}),e.jsx("th",{className:"px-3 py-1",children:"Kondisi"}),e.jsx("th",{className:"px-3 py-1",children:"Reseller"})]})}),e.jsx("tbody",{children:d.map(s=>e.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-gray-50",children:[e.jsxs("td",{className:"px-3 py-1",children:[s.date," ",e.jsx("span",{className:"text-[10px] text-gray-400",children:s.timestamp?new Date(s.timestamp).toLocaleTimeString("id-ID"):""})]}),e.jsx("td",{className:"px-3 py-1",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${s.type==="IN"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.type==="IN"?"MASUK":"KELUAR"})}),e.jsx("td",{className:"px-3 py-1 text-right font-semibold",children:s.quantity}),e.jsx("td",{className:"px-3 py-1 text-gray-600",children:s.condition}),e.jsx("td",{className:"px-3 py-1 text-gray-400",children:s.reseller||"-"})]},s.id))})]})})]})]})}export{A as default};
