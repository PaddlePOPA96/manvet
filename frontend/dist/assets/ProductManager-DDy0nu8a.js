import{r as m,j as e,S as w,f as C}from"./index-ChC7JKR1.js";import{I as l}from"./Input-DmDhfL36.js";import{X as j}from"./x-BcKJ8x2i.js";import{P}from"./plus-CPG4z07s.js";import{C as U}from"./circle-check-big-BN2ZTvY4.js";import{P as S}from"./pen-Cyzqc3TJ.js";import{T as z}from"./trash-2-K0MrUoou.js";function R({products:f,categories:u=[],units:h=[],onAdd:y,onEdit:v,onDelete:k,canManage:c}){const[x,g]=m.useState(!1),[s,o]=m.useState({name:"",price:"",cost:"",photoUrl:"",packageInfo:"",category:"",unit:""}),[d,p]=m.useState(null),[r,n]=m.useState({name:"",price:"",cost:"",photoUrl:"",packageInfo:"",category:"",unit:""}),N=a=>{if(a.preventDefault(),s.name&&s.price){if(!c){alert("Anda tidak memiliki hak untuk menambah produk.");return}y({name:s.name,price:parseInt(s.price),cost:parseInt(s.cost||0),photoUrl:s.photoUrl.trim(),packageInfo:s.packageInfo.trim(),category:s.category,unit:s.unit}),o({name:"",price:"",cost:"",photoUrl:"",packageInfo:"",category:"",unit:""}),g(!1)}},I=()=>{if(r.name&&r.price){if(!c){alert("Anda tidak memiliki hak untuk mengubah produk.");return}v(d,{name:r.name,price:parseInt(r.price),cost:parseInt(r.cost||0),photoUrl:(r.photoUrl||"").trim(),packageInfo:(r.packageInfo||"").trim(),category:r.category,unit:r.unit}),p(null)}};return e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-700 flex items-center gap-2",children:[e.jsx(w,{size:24})," Manajemen Produk"]}),e.jsxs("button",{onClick:()=>g(!x),disabled:!c,className:"bg-teal-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-teal-700 disabled:opacity-40 disabled:cursor-not-allowed",children:[x?e.jsx(j,{size:16}):e.jsx(P,{size:16})," ",x?"Batal":"Tambah Produk Baru"]})]}),x&&e.jsxs("form",{onSubmit:N,className:"bg-teal-50 p-4 rounded-lg mb-6 border border-teal-200 grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Nama Produk"}),e.jsx(l,{placeholder:"Nama...",value:s.name,onChange:a=>o({...s,name:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Hrg Modal (HPP)"}),e.jsx(l,{type:"number",placeholder:"0",value:s.cost,onChange:a=>o({...s,cost:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Kategori"}),e.jsxs("select",{className:"w-full border p-2 rounded text-sm disabled:bg-gray-100",value:s.category||"",onChange:a=>o({...s,category:a.target.value}),children:[e.jsx("option",{value:"",children:"- Kategori -"}),u.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Satuan"}),e.jsxs("select",{className:"w-full border p-2 rounded text-sm disabled:bg-gray-100",value:s.unit||"",onChange:a=>o({...s,unit:a.target.value}),children:[e.jsx("option",{value:"",children:"- Satuan -"}),h.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Hrg Jual"}),e.jsx(l,{type:"number",placeholder:"0",value:s.price,onChange:a=>o({...s,price:a.target.value}),required:!0})]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Info Paket / Deskripsi Singkat"}),e.jsx(l,{placeholder:"cth: 1 box isi 10",value:s.packageInfo,onChange:a=>o({...s,packageInfo:a.target.value})})]}),e.jsx("button",{type:"submit",className:"bg-teal-600 text-white p-2 rounded font-bold hover:bg-teal-700",children:"Simpan"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-600 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Produk"}),e.jsx("th",{className:"px-4 py-3",children:"Kategori"}),e.jsx("th",{className:"px-4 py-3",children:"Harga Jual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Aksi"})]})}),e.jsx("tbody",{children:f.map((a,i)=>{var b;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 align-top",children:d===i?e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{className:"border px-1 py-1 w-full text-sm",value:r.name,onChange:t=>n({...r,name:t.target.value})}),e.jsx(l,{className:"border px-1 py-1 w-full text-xs placeholder-gray-400",placeholder:"URL Foto",value:r.photoUrl||"",onChange:t=>n({...r,photoUrl:t.target.value})}),e.jsx(l,{className:"border px-1 py-1 w-full text-xs placeholder-gray-400",placeholder:"Info paket",value:r.packageInfo||"",onChange:t=>n({...r,packageInfo:t.target.value})})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[a.photoUrl?e.jsx("img",{src:a.photoUrl,alt:a.name,className:"w-10 h-10 rounded object-cover border border-gray-200"}):e.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 border border-gray-200 flex items-center justify-center text-[10px] text-gray-400",children:"No foto"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:a.name}),a.packageInfo&&e.jsx("div",{className:"text-xs text-gray-500",children:a.packageInfo})]})]})}),e.jsx("td",{className:"px-4 py-3 align-top text-xs text-gray-600",children:d===i?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:r.category||"",onChange:t=>n({...r,category:t.target.value}),children:[e.jsx("option",{value:"",children:"- Kat -"}),u.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:r.unit||"",onChange:t=>n({...r,unit:t.target.value}),children:[e.jsx("option",{value:"",children:"- Unit -"}),h.map(t=>e.jsx("option",{value:t,children:t},t))]})]}):e.jsxs("div",{children:[e.jsx("div",{children:((b=a.category)==null?void 0:b.name)||a.category||"-"}),e.jsx("div",{className:"text-gray-400 text-[10px]",children:a.unit||"Pcs"})]})}),e.jsx("td",{className:"px-4 py-3 font-bold text-teal-700 align-top",children:d===i?e.jsx(l,{type:"number",className:"border px-1 py-1 w-full",value:r.price,onChange:t=>n({...r,price:t.target.value})}):C(a.price)}),e.jsx("td",{className:"px-4 py-3 text-right flex justify-end gap-2",children:d===i?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:I,disabled:!c,className:"text-green-600 p-1 disabled:opacity-40 disabled:cursor-not-allowed",children:e.jsx(U,{size:18})}),e.jsx("button",{onClick:()=>p(null),className:"text-gray-500 p-1",children:e.jsx(j,{size:18})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{var t;if(!c){alert("Anda tidak memiliki hak untuk mengubah produk.");return}p(i),n({...a,category:((t=a.category)==null?void 0:t.name)||a.category||""})},className:"text-blue-500 p-1",children:e.jsx(S,{size:16})}),e.jsx("button",{onClick:()=>{if(!c){alert("Anda tidak memiliki hak untuk menghapus produk.");return}k(i)},className:"text-red-500 p-1",children:e.jsx(z,{size:16})})]})})]},a.id||i)})})]})})]})}export{R as default};
